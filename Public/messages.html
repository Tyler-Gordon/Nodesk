<!DOCTYPE html>
<html>
    <head>
        <title>Chat</title>
    </head>
    <body>
        <script>
            // Example websocket stuff for Tyler
            // Create WebSocket connection.
            // THIS IS AFTER YOU GET ALL INFO TO LOAD THE PAGE
            
            const ws = new WebSocket('ws://localhost:8000/messages', 'json');
            ws.addEventListener('open', () => {
                console.log('Connection opened.')
                const data = { message: 'Hello from the client!' }
                const json = JSON.stringify(data);
                ws.send(json);
                console.log('Message sent.')
            });

            ws.addEventListener('message', event => {
                const data = JSON.parse(event.data);
                document.getElementById('response').append(`${data.message}\n`)
            });

            function sendMessage() {
                var msg = {
                chatID: "MyChatID",
                userID: "MyID",
                message: document.getElementById("message").value,
                date: Date()
                };
                const json = JSON.stringify(msg)
                ws.send(json)
                document.getElementById("message").value = "";
            }

        </script>
        <p id="response"></p>
        <textarea id="message" name="message" maxlength="500"></textarea>
        <button id="sendMessage" onclick=sendMessage()>Send</button>
    </body>
</html>